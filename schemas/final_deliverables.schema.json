{
    "$id": "final_deliverables.schema.json",
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "title": "FinalDeliverables",
    "type": "object",
    "required": ["schema_version","run_id","dfds_updated","threats","dread","mitigations","manifests"],
    "properties": {
      "schema_version": { "type": "string", "const": "1.0" },
      "run_id": { "type": "string" },
      "dfds_updated": { "type": "array", "items": { "$ref": "annotated_dfd.schema.json" } },
      "threats": { "$ref": "stride_matrix.schema.json" },
      "dread": { "$ref": "dread.schema.json" },
      "mitigations": { "$ref": "mitigations.schema.json" },
      "manifests": {
        "type": "object",
        "required": ["artifact_manifest","analytics"],
        "properties": {
          "artifact_manifest": {
            "type": "array",
            "items": {
              "type": "object",
              "required": ["path", "bytes"],
              "properties": {
                "path": { "type": "string" },
                "sha256": { "type": "string" },
                "bytes": { "type": "integer", "minimum": 0 }
              }
            }
          },
          "analytics": {
            "type": "object",
            "required": ["llm_calls","wall_time_ms"],
            "properties": {
              "llm_calls": { "type": "integer", "minimum": 0 },
              "wall_time_ms": { "type": "integer", "minimum": 0 },
              "cost_usd": { "type": "number", "minimum": 0 }
            }
          }
        }
      }
    }
  }
  